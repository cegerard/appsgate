<div class="main-block-node" id="<%= node.iid %>">
  <div id="progress-<%= node.rules.state.iid %>" class="progress-indicator-group">
    <img src="/app/img/locked-node.svg" class="progress-indicator locked-node-indicator hidden"/>
    <img src="/app/img/unlocked-node.svg" class="progress-indicator unlocked-node-indicator hidden"/>
    <img src="/app/img/flash.svg" class="progress-indicator progress-indicator-counter" />
    <span id="progress-counter-<%=node.rules.state.iid %>" class="progress-indicator">0</span>
    <span class="progress-indicator" data-i18n='debugger.times'/>
  </div>
  <div class="row">
    <button class="btn btn-prog btn-primary btn-then">
      <span data-i18n="language.while-keyword"></span>
    </button>
    <%=engine.buildInputFromNode(node.state, currentNode)%>
    <span data-i18n="language.then-keyword"/>
  </div>
  <div class="row indent-level-1">
    <span name="keep" data-i18n="language.keep-keyword"></span>
      <%=engine.buildInputFromNode(node.rules, currentNode) %>
    <span name="keep" data-i18n="language.keep-then"></span>
  </div>
  <% if ( node.rulesThen != undefined) { %>
  <div <% if(node.rulesThen.rules.length < 2 ) { %>class="secondary-block-node seq-block-node"<% } %>>
    <div>
      <button class="btn btn-prog btn-primary disabled read-only btn-then">
        <span data-i18n="language.and-when"></span>
      </button>
      <span data-i18n="language.it-is-not-the-case"></span>
      <span data-i18n="language.then-keyword"></span>
    </div>
    <div class="row indent-level-1">
      <%=engine.buildInputFromNode(node.rulesThen, currentNode) %>
    </div>
  </div>
  <%}%>
</div>
